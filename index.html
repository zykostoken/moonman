index.htmL
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYKOS - The Toaster Token</title>
    <script src="https://cdn.ethers.io/lib/ethers-6.7.0.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            overflow-x: hidden;
        }

        /* Scanlines effect */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 255, 0, 0.03) 0px,
                transparent 1px,
                transparent 2px,
                rgba(0, 255, 0, 0.03) 3px
            );
            z-index: 9999;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            background: 
                linear-gradient(45deg, #000 25%, transparent 25%),
                linear-gradient(-45deg, #000 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #000 75%),
                linear-gradient(-45deg, transparent 75%, #000 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, #000 100%);
        }

        .logo {
            font-size: 72px;
            text-shadow: 0 0 20px #0f0, 0 0 40px #0f0;
            margin-bottom: 20px;
            animation: glow 3s ease-in-out infinite alternate;
            position: relative;
            z-index: 1;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #0f0, 0 0 20px #0f0; }
            to { text-shadow: 0 0 30px #0f0, 0 0 60px #0f0, 0 0 80px #0f0; }
        }

        .tagline {
            font-size: 24px;
            color: #ff6b00;
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .punk-text {
            text-align: center;
            max-width: 600px;
            margin: 30px auto;
            font-size: 16px;
            line-height: 1.8;
            border: 2px solid #0f0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        /* Buy Section */
        .buy-section {
            max-width: 800px;
            margin: 60px auto;
            padding: 40px;
            background: rgba(0, 17, 0, 0.95);
            border: 3px solid #0f0;
            box-shadow: 0 0 40px rgba(0, 255, 0, 0.4);
            position: relative;
        }

        .buy-section h2 {
            color: #ff6b00;
            font-size: 36px;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #ff6b00;
        }

        .wallet-status {
            background: #000;
            border: 2px solid #0f0;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .wallet-status.connected {
            border-color: #0f0;
        }

        .wallet-status.disconnected {
            border-color: #666;
        }

        .buy-form {
            margin: 30px 0;
        }

        .form-row {
            margin: 20px 0;
        }

        label {
            display: block;
            color: #ff6b00;
            margin-bottom: 8px;
            font-size: 14px;
        }

        input, select {
            width: 100%;
            background: #000;
            border: 2px solid #0f0;
            color: #0f0;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
        }

        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }

        .price-info {
            background: rgba(255, 107, 0, 0.1);
            border: 1px solid #ff6b00;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
        }

        .price-info div {
            margin: 8px 0;
        }

        .price-info span {
            color: #ff6b00;
            font-weight: bold;
        }

        button {
            width: 100%;
            background: #0f0;
            color: #000;
            border: none;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 0;
        }

        button:hover:not(:disabled) {
            background: #ff6b00;
            box-shadow: 0 0 30px rgba(255, 107, 0, 0.8);
        }

        button:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        .warning-box {
            background: rgba(51, 0, 0, 0.8);
            border: 2px solid #f00;
            color: #f00;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .info-box {
            background: rgba(0, 51, 0, 0.8);
            border: 2px solid #0f0;
            color: #0f0;
            padding: 20px;
            margin: 20px 0;
        }

        .status-message {
            padding: 15px;
            margin: 15px 0;
            border: 2px solid;
            text-align: center;
            font-weight: bold;
        }

        .status-message.success {
            background: rgba(0, 51, 0, 0.8);
            border-color: #0f0;
            color: #0f0;
        }

        .status-message.error {
            background: rgba(51, 0, 0, 0.8);
            border-color: #f00;
            color: #f00;
        }

        .status-message.warning {
            background: rgba(51, 34, 0, 0.8);
            border-color: #ff0;
            color: #ff0;
        }

        /* Pool Info */
        .pool-info {
            background: #001100;
            border: 1px solid #0f0;
            padding: 20px;
            margin: 20px 0;
        }

        .pool-stat {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 16px;
        }

        .pool-stat .label {
            color: #ff6b00;
        }

        .pool-stat .value {
            color: #0f0;
            font-weight: bold;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            border-top: 2px solid #0f0;
            margin-top: 60px;
        }

        .footer p {
            margin: 10px 0;
            color: #666;
        }

        .contract-info {
            background: #000;
            border: 1px solid #0f0;
            padding: 15px;
            margin: 20px auto;
            max-width: 600px;
            font-size: 12px;
        }

        .contract-info a {
            color: #ff6b00;
            text-decoration: none;
        }

        .contract-info a:hover {
            color: #0f0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo { font-size: 48px; }
            .tagline { font-size: 18px; }
            .buy-section { padding: 20px; margin: 20px; }
            .buy-section h2 { font-size: 28px; }
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>

    <!-- Hero Section -->
    <section class="hero">
        <h1 class="logo">üçû ZYKOS üçû</h1>
        <div class="tagline">THE TOASTER TOKEN</div>
        <div class="punk-text">
            <p><strong>No prometemos nada. No negamos nada.</strong></p>
            <p style="margin-top: 15px;">
                Los tokens no se queman. Se tuestan. <br>
                Virgin ‚Üí Bronze ‚Üí Charcoal.<br>
                Econom√≠a circular. Tesorer√≠a auto-sostenible.
            </p>
        </div>
    </section>

    <!-- Buy Section -->
    <section class="buy-section">
        <h2>üí∏ COMPR√Å ZYKOS</h2>

        <!-- Wallet Connection -->
        <div id="walletStatus" class="wallet-status disconnected">
            <p id="statusText">Conect√° tu wallet para empezar</p>
            <p id="addressDisplay" style="margin-top: 10px; display: none;"></p>
        </div>

        <button id="connectBtn" onclick="connectWallet()">
            üîå CONECTAR METAMASK
        </button>

        <!-- Pool Info -->
        <div id="poolInfo" style="display: none;">
            <div class="pool-info">
                <h3 style="color: #ff6b00; margin-bottom: 15px;">üìä POOL ACTUAL</h3>
                <div class="pool-stat">
                    <span class="label">Pool ID:</span>
                    <span class="value" id="poolId">-</span>
                </div>
                <div class="pool-stat">
                    <span class="label">Precio por ZKS:</span>
                    <span class="value" id="poolPrice">-</span>
                </div>
                <div class="pool-stat">
                    <span class="label">Tokens disponibles:</span>
                    <span class="value" id="poolRemaining">-</span>
                </div>
                <div class="pool-stat">
                    <span class="label">Vendidos:</span>
                    <span class="value" id="poolSold">-</span>
                </div>
            </div>
        </div>

        <!-- Buy Form -->
        <div id="buyForm" style="display: none;">
            <div class="warning-box">
                ‚ö†Ô∏è IMPORTANTE: Solo aceptamos USDT o USDC en BSC
            </div>

            <div class="form-row">
                <label>M√âTODO DE PAGO</label>
                <select id="paymentToken">
                    <option value="USDT">USDT (Binance-Peg)</option>
                    <option value="USDC">USDC (Binance-Peg)</option>
                </select>
            </div>

            <div class="form-row">
                <label>CANTIDAD DE ZKS</label>
                <input type="number" id="amountInput" placeholder="Ej: 40" min="1" value="40" />
            </div>

            <div class="price-info" id="priceInfo">
                <div>
                    <span>Precio unitario:</span> <span id="unitPrice">-</span> USDT
                </div>
                <div>
                    <span>Total a pagar:</span> <span id="totalCost">-</span> <span id="tokenSymbol">USDT</span>
                </div>
            </div>

            <div id="statusMessage"></div>

            <button id="buyBtn" onclick="buyTokens()" disabled>
                üí∏ COMPRAR ZKS
            </button>

            <div class="info-box" style="font-size: 14px;">
                <strong>PROCESO DE COMPRA (2 PASOS):</strong><br><br>
                1Ô∏è‚É£ APPROVAL: Autorizar que el contrato use tus USDT/USDC<br>
                2Ô∏è‚É£ COMPRA: Ejecutar la transacci√≥n de compra<br><br>
                MetaMask te va a pedir confirmar AMBAS transacciones.
            </div>
        </div>
    </section>

    <!-- Contract Info -->
    <div class="contract-info">
        <strong style="color: #ff6b00;">CONTRATO INFO:</strong><br>
        ZKS: <a href="https://bscscan.com/address/0xB4D46506A8553070085b8970D971Cdeafb030" target="_blank">0xB4D4...b030</a><br>
        Red: BSC Mainnet (Chain ID: 56)<br>
        Cooldown: 2.33 horas entre compras<br>
        M√°ximo: $50,000 USD por compra
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p style="color: #ff6b00; font-size: 20px; font-weight: bold;">
            üçû THE TOASTER TOKEN üçû
        </p>
        <p>No prometemos nada. No negamos nada.</p>
        <p style="margin-top: 20px; font-size: 12px;">
            Contrato audited | Treasury distribuida | Econom√≠a circular
        </p>
    </footer>

    <script>
        // ============================================
        // ZYKOS BUY INTEGRATION - USDT/USDC
        // ============================================

        const ZYKOS_CONTRACT = "0xB4D46506A8553070085b8970D971Cdeafb030";
        const USDT_BSC = "0x55d398326f99059fF775485246999027B3197955";
        const USDC_BSC = "0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d";

        const ZYKOS_ABI = [
            "function buyWithUSDC(uint256 amount) external",
            "function buyWithUSDT(uint256 amount) external",
            "function calcPrice(uint256 amount) external view returns (uint256)",
            "function getPool(uint256 id) external view returns (uint256 pricePerToken, uint256 tokensRemaining, uint256 tokensSold, uint8 status, uint256 percentSold)",
            "function currentPoolId() external view returns (uint256)",
            "function paused() external view returns (bool)",
            "function balanceOf(address account) external view returns (uint256)",
            "function lastPurchaseTime(address) external view returns (uint256)",
            "function COOLDOWN_PERIOD() external view returns (uint256)"
        ];

        const ERC20_ABI = [
            "function balanceOf(address owner) external view returns (uint256)",
            "function allowance(address owner, address spender) external view returns (uint256)",
            "function approve(address spender, uint256 amount) external returns (bool)"
        ];

        let provider, signer, contract, usdtContract, usdcContract, userAddress;

        async function connectWallet() {
            try {
                if (!window.ethereum) {
                    showMessage("MetaMask no detectado. Instal√° la extensi√≥n.", "error");
                    return;
                }

                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                userAddress = accounts[0];
                
                provider = new ethers.BrowserProvider(window.ethereum);
                signer = await provider.getSigner();
                
                contract = new ethers.Contract(ZYKOS_CONTRACT, ZYKOS_ABI, signer);
                usdtContract = new ethers.Contract(USDT_BSC, ERC20_ABI, signer);
                usdcContract = new ethers.Contract(USDC_BSC, ERC20_ABI, signer);

                // Verificar red
                const network = await provider.getNetwork();
                if (network.chainId !== 56n) {
                    await switchToBSC();
                }

                document.getElementById('walletStatus').className = 'wallet-status connected';
                document.getElementById('statusText').textContent = '‚úÖ WALLET CONECTADA';
                document.getElementById('addressDisplay').textContent = `${userAddress.slice(0,6)}...${userAddress.slice(-4)}`;
                document.getElementById('addressDisplay').style.display = 'block';
                document.getElementById('connectBtn').textContent = '‚úÖ CONECTADO';
                document.getElementById('connectBtn').disabled = true;
                
                document.getElementById('poolInfo').style.display = 'block';
                document.getElementById('buyForm').style.display = 'block';

                await loadPoolInfo();

            } catch (error) {
                showMessage(`Error: ${error.message}`, "error");
            }
        }

        async function switchToBSC() {
            try {
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: '0x38' }],
                });
            } catch (error) {
                if (error.code === 4902) {
                    await window.ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [{
                            chainId: '0x38',
                            chainName: 'BNB Smart Chain',
                            nativeCurrency: { name: 'BNB', symbol: 'BNB', decimals: 18 },
                            rpcUrls: ['https://bsc-dataseed.binance.org/'],
                            blockExplorerUrls: ['https://bscscan.com/']
                        }]
                    });
                }
            }
        }

        async function loadPoolInfo() {
            try {
                const [isPaused, poolId] = await Promise.all([
                    contract.paused(),
                    contract.currentPoolId()
                ]);

                if (isPaused) {
                    showMessage("‚ö†Ô∏è Contrato pausado temporalmente", "warning");
                    document.getElementById('buyBtn').disabled = true;
                    return;
                }

                const poolData = await contract.getPool(poolId);
                
                document.getElementById('poolId').textContent = Number(poolId);
                document.getElementById('poolPrice').textContent = `$${parseFloat(ethers.formatUnits(poolData[0], 6)).toFixed(6)}`;
                document.getElementById('poolRemaining').textContent = parseFloat(ethers.formatEther(poolData[1])).toFixed(0);
                document.getElementById('poolSold').textContent = `${Number(poolData[4])}%`;

                // Check cooldown
                const [cooldownPeriod, lastPurchase] = await Promise.all([
                    contract.COOLDOWN_PERIOD(),
                    contract.lastPurchaseTime(userAddress)
                ]);

                const now = Math.floor(Date.now() / 1000);
                const cooldownRemaining = Math.max(0, Number(lastPurchase) + Number(cooldownPeriod) - now);

                if (cooldownRemaining > 0) {
                    const hours = Math.floor(cooldownRemaining / 3600);
                    const mins = Math.floor((cooldownRemaining % 3600) / 60);
                    showMessage(`‚è≥ Cooldown activo: ${hours}h ${mins}m restantes`, "warning");
                    document.getElementById('buyBtn').disabled = true;
                } else {
                    document.getElementById('buyBtn').disabled = false;
                    updateCost();
                }

            } catch (error) {
                showMessage(`Error cargando info: ${error.message}`, "error");
            }
        }

        async function updateCost() {
            try {
                const amount = document.getElementById('amountInput').value;
                const paymentToken = document.getElementById('paymentToken').value;
                
                if (!amount || amount <= 0) return;

                const amountWei = ethers.parseEther(amount);
                const costRaw = await contract.calcPrice(amountWei);
                const cost = ethers.formatUnits(costRaw, 6);
                
                const poolData = await contract.getPool(await contract.currentPoolId());
                const unitPrice = ethers.formatUnits(poolData[0], 6);

                document.getElementById('unitPrice').textContent = parseFloat(unitPrice).toFixed(6);
                document.getElementById('totalCost').textContent = parseFloat(cost).toFixed(2);
                document.getElementById('tokenSymbol').textContent = paymentToken;

            } catch (error) {
                console.error("Error calculando costo:", error);
            }
        }

        document.getElementById('amountInput').addEventListener('input', updateCost);
        document.getElementById('paymentToken').addEventListener('change', updateCost);

        async function buyTokens() {
            try {
                const amount = document.getElementById('amountInput').value;
                const paymentToken = document.getElementById('paymentToken').value;
                
                if (!amount || amount <= 0) {
                    showMessage("Ingres√° una cantidad v√°lida", "error");
                    return;
                }

                showMessage("üîÑ Procesando compra...", "warning");
                document.getElementById('buyBtn').disabled = true;

                // Calcular costo
                const amountWei = ethers.parseEther(amount);
                const costRaw = await contract.calcPrice(amountWei);
                const cost = ethers.formatUnits(costRaw, 6);

                // PASO 1: APPROVAL
                showMessage(`üìù PASO 1/2: Aprobando ${cost} ${paymentToken}...`, "warning");
                
                const tokenContract = paymentToken === 'USDT' ? usdtContract : usdcContract;
                const costWei = ethers.parseUnits(cost, 18);

                const approveTx = await tokenContract.approve(ZYKOS_CONTRACT, costWei);
                await approveTx.wait();
                
                showMessage("‚úÖ Approval confirmada. Ahora ejecutando compra...", "success");

                // PASO 2: BUY
                showMessage("üìù PASO 2/2: Ejecutando compra...", "warning");
                
                let buyTx;
                if (paymentToken === 'USDT') {
                    buyTx = await contract.buyWithUSDT(amountWei);
                } else {
                    buyTx = await contract.buyWithUSDC(amountWei);
                }

                showMessage(`‚è≥ Esperando confirmaci√≥n...<br><a href="https://bscscan.com/tx/${buyTx.hash}" target="_blank" style="color: #ff6b00;">Ver TX en BSCScan</a>`, "warning");

                await buyTx.wait();
                
                showMessage(`üéâ COMPRA EXITOSA!<br>Compraste ${amount} ZKS<br><a href="https://bscscan.com/tx/${buyTx.hash}" target="_blank" style="color: #ff6b00;">Ver TX</a>`, "success");

                setTimeout(() => loadPoolInfo(), 3000);

            } catch (error) {
                showMessage(`‚ùå Error: ${error.message}`, "error");
                document.getElementById('buyBtn').disabled = false;
            }
        }

        function showMessage(msg, type) {
            const msgDiv = document.getElementById('statusMessage');
            msgDiv.className = `status-message ${type}`;
            msgDiv.innerHTML = msg;
        }
    </script>
</body>
</html>
